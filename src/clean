#!/bin/bash
APP="QtBrynhildr"

# check arg1
EXTOPT=""
if [ -n "$1" ] ; then
	case $1 in
		clean)
			;;
		cygwin)
			EXTOPT="cygwin"
			;;
		msvc64)
			EXTOPT="msvc"
			;;
		msvc)
			EXTOPT="msvc64"
			;;
		ubuntu64)
			EXTOPT="ubuntu64"
			;;
		ubuntu)
			EXTOPT="ubuntu"
			;;
		*)
			echo "Unkown argument1 : $1"
			exit 1
			;;
	esac
fi

# check arg2
if [ -n "$2" ] ; then
	case $2 in
		clean)
			;;
		*)
			echo "Unkown argument2 : $2"
			exit 1
			;;
	esac
fi

case $UNAME in
	CYGWIN*)
		if [ "$1" = "" ] ; then
			mingw32-make clean
			# delete executable file
			rm -f release/${APP}.* debug/${APP}.*
			# delete executable file for Android
			rm -f lib${APP}.so
		fi
		if [ "$1" = "cygwin" ] ; then
			make clean
			# delete executable file
			rm -f ${APP}.exe
		fi
		# clean key layout file compiler
		pushd keylayout; make clean; popd
		# delete coverity scan directory
		rm -rf cov-int
		# delete manual
		pushd ../doc/manual
		make clean
		popd
		rm -rf ../dist/doc/manual/*
		# delete files for install
		./install $EXTOPT clean
		;;
	Linux)
		make clean
		# delete executable file
		rm -f ${APP}
		# clean key layout file compiler
		pushd keylayout; make clean; popd
		pushd ../doc/manual
		# delete manual
		make clean
		popd
		rm -rf ../dist/doc/manual/*
		# delete files for install
		./install $EXTOPT clean
		;;
	FreeBSD)
		make clean
		# delete executable file
		rm -f ${APP}
		# clean key layout file compiler
		pushd keylayout; make clean; popd
		pushd ../doc/manual
		# delete manual
		make clean
		popd
		rm -rf ../dist/doc/manual/*
		# delete files for install
		./install clean
		;;
	Darwin)
		make clean
		# delete executable file
		rm -rf ${APP}.app
		# clean key layout file compiler
		pushd keylayout; make clean; popd
		pushd ../doc/manual
		# delete manual
		make clean
		popd
		rm -rf ../dist/doc/manual/*
		# delete files for install
		./install clean
		;;
	*)
		echo "clean : Not support platform. $UNAME"
		exit 1;
		;;
esac

echo "$0 : Done."

rm -f ${APP}.log
